---
import BaseLayout from '../layouts/BaseLayout.astro';
import { SEO } from 'astro-seo';
import AuthorBox from './AuthorBox';
import RelatedContent from './RelatedContent';

interface Props {
  title: string;
  description: string;
  publishDate: string;
  readingTime?: string;
  relatedContent?: Array<{
    title: string;
    description: string;
    url: string;
    type: 'blog' | 'service' | 'case-study';
  }>;
}

const { title, description, publishDate, readingTime = "10 perc olvasás", relatedContent = [] } = Astro.props;

const structuredData = {
  '@context': 'https://schema.org',
  '@type': 'Article',
  'headline': title,
  'description': description,
  'datePublished': publishDate,
  'author': {
    '@type': 'Person',
    '@id': 'https://leventestudio.app/rolam/#tarnóczi-levente',
    'name': 'Tarnóczi Levente',
    'url': 'https://leventestudio.app/rolam/',
    'image': 'https://leventestudio.app/levente_studio_portrait_final.webp'
  },
  'publisher': {
    '@type': 'Organization',
    '@id': 'https://leventestudio.app/#organization',
    'name': 'LeventeStudio',
    'url': 'https://leventestudio.app',
    'logo': {
      '@type': 'ImageObject',
      'url': 'https://leventestudio.app/logo.png',
      'width': 512,
      'height': 512
    }
  },
  'mainEntityOfPage': {
    '@type': 'WebPage',
    '@id': Astro.url.href
  },
  'image': {
    '@type': 'ImageObject',
    'url': 'https://leventestudio.app/og-image.jpg',
    'width': 1200,
    'height': 630
  }
};
---

<BaseLayout structuredData={structuredData}>
  <SEO
    slot="head"
    title={title}
    description={description}
    openGraph={{
      basic: {
        title: title,
        type: "article",
        image: "/og-image.jpg",
      },
      article: {
        publishedTime: publishDate,
        authors: ["Tarnóczi Levente"],
      }
    }}
    twitter={{
      card: "summary_large_image",
    }}
  />

  <article class="max-w-3xl mx-auto px-4 py-16 sm:px-6 lg:px-8">
    <nav class="mb-8 text-sm text-taupe-600">
      <a href="/" class="hover:text-taupe-900">Főoldal</a>
      <span class="mx-2">/</span>
      <a href="/blog/" class="hover:text-taupe-900">Blog</a>
      <span class="mx-2">/</span>
      <span class="text-taupe-900">{title}</span>
    </nav>

    <header class="mb-12">
      <h1 class="font-serif text-4xl sm:text-5xl font-light text-taupe-900 mb-4 leading-tight">
        {title}
      </h1>
      <div class="flex items-center gap-4 text-taupe-600 text-sm">
        <time datetime={publishDate}>
          {new Date(publishDate).toLocaleDateString('hu-HU', { year: 'numeric', month: 'long', day: 'numeric' })}
        </time>
        <span>•</span>
        <span>{readingTime}</span>
        <span>•</span>
        <span>Szerző: Tarnóczi Levente</span>
      </div>
    </header>

    <div class="prose prose-lg prose-neutral max-w-none">
      <slot />
    </div>

    <AuthorBox client:load />

    {relatedContent.length > 0 && (
      <RelatedContent client:load items={relatedContent} />
    )}

    <div class="mt-16 p-8 bg-taupe-900 text-cream-50 rounded-sm">
      <h2 class="text-2xl font-normal mb-4">
        Szeretnéd professzionálisan átvizsgáltatni a weboldalad?
      </h2>
      <p class="text-cream-200 mb-6">
        Teljes körű weboldal audit 5-7 nap alatt. Konkrét problémák, priorizált javítási terv.
      </p>
      <a
        href="/szolgaltatas/weboldal-audit/"
        class="inline-flex items-center gap-3 px-6 py-3 bg-cream-50 text-taupe-900 rounded-sm hover:bg-cream-100 transition-colors"
      >
        Weboldal audit szolgáltatás
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
        </svg>
      </a>
    </div>
  </article>
</BaseLayout>
