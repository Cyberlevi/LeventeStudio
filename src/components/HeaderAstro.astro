---
const { pathname } = Astro.url;

const isActive = (path: string) => pathname === path || pathname === path + '/';

const navLinks = [
  { path: '/', label: 'Főoldal' },
  { path: '/rolam/', label: 'Rólam' },
  { path: '/esettanulmanyok/', label: 'Esettanulmányok' },
  { path: '/kapcsolat/', label: 'Kapcsolat' }
];
---

<header class="fixed top-0 left-0 right-0 z-50 bg-cream-50/95 backdrop-blur-sm border-b border-taupe-100">
  <div class="max-w-6xl mx-auto px-6 py-4">
    <div class="flex items-center justify-between">
      <a href="/">
        <img src="/logo-primary-dark.svg" alt="LeventeStudio" class="h-8" />
      </a>

      <nav class="hidden lg:flex items-center gap-8">
        {navLinks.map((link) => (
          <a
            href={link.path}
            class:list={[
              'text-sm font-light transition-colors duration-200',
              isActive(link.path)
                ? 'text-taupe-900 font-normal'
                : 'text-taupe-700 hover:text-taupe-900'
            ]}
          >
            {link.label}
          </a>
        ))}
      </nav>

      <div class="flex items-center gap-4">
        <a
          href="https://wa.me/36202826843?text=Szia%2C%20weboldal%20auditot%20szeretn%C3%A9k%20k%C3%A9rni"
          target="_blank"
          rel="noopener noreferrer"
          class="hidden md:inline-flex items-center gap-2 px-6 py-3 bg-taupe-900 text-cream-50 rounded-sm hover:bg-taupe-800 transition-colors duration-200 text-sm font-light"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path></svg>
          Ingyenes konzultáció
        </a>

        <a
          href="tel:+36202826843"
          class="lg:hidden inline-flex items-center gap-2 text-taupe-700 hover:text-taupe-900 transition-colors duration-200 text-sm font-light"
        >
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>
        </a>

        <button
          id="mobile-menu-button"
          class="lg:hidden p-2 text-taupe-900"
          aria-label="Toggle menu"
        >
          <svg id="menu-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg>
          <svg id="close-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="hidden"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg>
        </button>
      </div>
    </div>

    <nav id="mobile-menu" class="lg:hidden mt-4 pb-4 hidden flex-col gap-4 border-t border-taupe-200 pt-4">
      {navLinks.map((link) => (
        <a
          href={link.path}
          class:list={[
            'mobile-menu-link text-base font-light transition-colors duration-200',
            isActive(link.path)
              ? 'text-taupe-900 font-normal'
              : 'text-taupe-700'
          ]}
        >
          {link.label}
        </a>
      ))}
      <a
        href="https://wa.me/36202826843?text=Szia%2C%20weboldal%20auditot%20szeretn%C3%A9k%20k%C3%A9rni"
        target="_blank"
        rel="noopener noreferrer"
        class="mobile-menu-link inline-flex items-center gap-2 px-6 py-3 bg-taupe-900 text-cream-50 rounded-sm hover:bg-taupe-800 transition-colors duration-200 text-sm font-light justify-center"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path></svg>
        Ingyenes konzultáció
      </a>
    </nav>
  </div>
</header>

<script is:inline>
  function initMobileMenu() {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuIcon = document.getElementById('menu-icon');
    const closeIcon = document.getElementById('close-icon');

    if (mobileMenuButton && mobileMenu && menuIcon && closeIcon) {
      mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
        mobileMenu.classList.toggle('flex');
        menuIcon.classList.toggle('hidden');
        closeIcon.classList.toggle('hidden');
      });

      const mobileMenuLinks = document.querySelectorAll('.mobile-menu-link');
      mobileMenuLinks.forEach(link => {
        link.addEventListener('click', () => {
          mobileMenu.classList.add('hidden');
          mobileMenu.classList.remove('flex');
          menuIcon.classList.remove('hidden');
          closeIcon.classList.add('hidden');
        });
      });
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initMobileMenu);
  } else {
    initMobileMenu();
  }
</script>
